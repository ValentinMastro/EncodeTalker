[daemon]
max_concurrent_jobs = 1
socket_path = "~/.local/share/encodetalker/daemon.sock"
log_level = "info"

[encoding]
default_encoder = "svt-av1"
default_audio_mode = "opus"
default_audio_bitrate = 128
output_suffix = ".av1"
# Comptage précis des frames via ffmpeg (lent mais exact, utile pour vidéos VFR)
# false = estimation rapide (durée × fps), true = comptage précis
precise_frame_count = true

[encoder.svt-av1]
preset = 6
crf = 30
params = ["--keyint", "240", "--tune", "3"]

[encoder.aom]
cpu-used = 4
crf = 30

[ui]
file_extensions = [".mp4", ".mkv", ".avi", ".mov", ".webm"]
refresh_interval_ms = 500

# Configuration des binaires : utiliser les versions système ou compilées
# Options : "system" (utiliser via PATH) ou "compiled" (forcer compilation locale)
[binaries]
# Par défaut, utiliser FFmpeg système s'il est disponible (plus rapide au démarrage)
# Si FFmpeg système n'est pas trouvé, il sera compilé automatiquement
ffmpeg_source = "system"

# SVT-AV1-PSY et libaom sont toujours compilés localement car rarement disponibles
# dans les dépôts standards. Vous pouvez forcer "system" si vous les avez installés.
svt_av1_source = "compiled"
aom_source = "compiled"

# Configuration des chemins (OPTIONNEL)
# Si cette section est absente, les chemins XDG par défaut sont utilisés :
#   - Données : ~/.local/share/encodetalker/
#   - Dépendances : ~/.local/share/encodetalker/deps/ (~500 MB)
#   - Socket : ~/.local/share/encodetalker/daemon.sock
#
# Support de ~ (home directory) et variables d'environnement ($HOME, $USER, etc.)
# Les chemins absolus sont recommandés pour éviter toute ambiguïté
#
# IMPORTANT : Le daemon ET le TUI doivent utiliser le même config.toml pour
# garantir qu'ils utilisent le même socket_path
[paths]
# Déplacer tout le répertoire de données (state.json, daemon.log, deps/, socket)
# data_dir = "~/.local/share/encodetalker"

# Déplacer uniquement les dépendances compilées (~500 MB)
# Utile pour les mettre sur un SSD pour compilation plus rapide
# deps_dir = "/mnt/ssd/encodetalker-deps"

# Socket Unix personnalisé (cas d'usage : multi-utilisateurs)
# socket_path = "/tmp/encodetalker-$USER.sock"
